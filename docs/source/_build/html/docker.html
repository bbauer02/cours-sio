<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.0 Introduction &mdash; Cours BTS SIO 0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Cours BTS SIO
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Cours BTS SIO</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>1.0 Introduction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/docker.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="introduction">
<h1>1.0 Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline"></a></h1>
<p>Ce cours est découpé en différent chapitre et permet un apprentissage progressif des différents concepts et de leur mise en pratique.
On commencera par donner quelques exemples de ce qu’il est possible de faire avec Docker dans la section « Quick Wins ».
Nous ferons références à des concepts utiles comme les conteneurs Linux, de Micro services, de Dev Ops.etc.
Nous aurons un chapitre sur la plateforme Docker, son architecture, son fonctionnement et sa mise en place.
Nous verrons comment Docker rend très simple la manipulation des containeurs.
Nous parlerons de la notion d’images qui permet de packager une application et ses dépendances.
Dans le chapitre sur le stockage, nous apprendrons à utiliser Docker pour que les données puissent persister dans les conteneurs.</p>
<p>On parlera de</p>
<ul class="simple">
<li><p>Docker Machine pour créer des hôtes Docker.</p></li>
<li><p>Docker compose qui permet de créer des applications en multi conteneur.</p></li>
<li><p>Docker Swarm la solution d’orchestration de Docker qui permet de gérer des applications qui tournent dans des conteneurs.</p></li>
<li><p>La partie réseau dans Docker.</p></li>
<li><p>Eléments de sécurité qui entrent en jeu.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Prérequis :</strong> Installation de <strong>WSL 2</strong> sur <strong>windows 10</strong>.
Afin de pouvoir utiliser des commandes linux dans une console <strong>POWERSHELL</strong>.</p>
<blockquote>
<div><div class="highlight-language notranslate"><div class="highlight"><pre><span></span>wsl –install -d ubuntu
wsl --set-version ubuntu 2
</pre></div>
</div>
</div></blockquote>
<p>Dans la console, tapez : <code class="docutils literal notranslate"><span class="pre">ubuntu</span></code> pour basculer dans un environnement <strong>Ubuntu</strong>.</p>
</div>
<section id="quick-wins">
<h2>1.1 Quick Wins<a class="headerlink" href="#quick-wins" title="Permalink to this headline"></a></h2>
<p>Très souvent le premier contact que l’on a avec Docker s’effectue via le Docker Hub accessible sur <a class="reference external" href="https://hub.docker.com">https://hub.docker.com</a> .</p>
<img alt="Docker Hub" src="_images/image64.png" />
<p>Il s’agit d’un registre (ou <strong>registry</strong>) dans lequel nous retrouvons beaucoup d’applications packagées dans des images <strong>Docker</strong>.
Cette notion d’image est la base de ce qu’apporte <strong>Docker</strong>.
Voici un exemple de services qui peuvent être contenu dans une image <strong>Docker</strong> :</p>
<img alt="_images/image66.png" src="_images/image66.png" />
<p>Par exemple, grâce à <strong>Docker</strong> nous pouvons lancer un interpréteur interactif (<strong>REPL</strong>) pour des langages de programmation comme le <strong>Python</strong>, le <strong>Ruby On Rail</strong> ou le <strong>Javascript</strong>.</p>
<img alt="_images/image65.png" src="_images/image65.png" />
<p>Nous avons alors accès à un environnement <strong>Python</strong> en interactif et c’est le flag <code class="docutils literal notranslate"><span class="pre">-ti</span></code> qui permet l’interactivité avec le processus du containeur.</p>
<p>De la même manière, nous pouvons lancer un environnement <strong>NodeJs</strong>, ici contenant le Tag <code class="docutils literal notranslate"><span class="pre">8.12-alpine</span></code>.
<strong>8.12</strong> est la version de <strong>NodeJs</strong> et <strong>alpine</strong> est le nom de la distribution Linux utilisée dans le container.</p>
<p>Par exemple si nous avons besoin d’une base de données <strong>MongoDB</strong> dans la version 4.0.Nous n’avons qu’à trouver une image disponible dans le <strong>Docker Hub</strong>.</p>
<img alt="_images/image68.png" src="_images/image68.png" />
<p>On peut imaginer avoir besoin de lancer plusieurs containers MongoDB avec des versions différentes.
Cela peut être utile pour tester une différence de comportement entre deux versions par exemple.</p>
</section>
<section id="des-stacks-completes">
<h2>1.2 Des Stacks complètes<a class="headerlink" href="#des-stacks-completes" title="Permalink to this headline"></a></h2>
<p>Une application fonctionne rarement seule et est souvent constituée d’un ensemble de services.
Cet ensemble constitue une <strong>Stack applicative</strong>.
Par exemple, prenons le cas de la Stack <strong>Elastic</strong>, qui est souvent utilisée pour la gestion des log.
Elle est constituée de <strong>BEATS</strong> et <strong>LOGSTASH</strong> qui est là pour l’ingestion des logs, de <strong>ELASTICSEARCH</strong> pour l’analyse et
le stockage des logs et <strong>KIBANA</strong> qui permet de visualiser tout cela.</p>
<img alt="_images/image67.png" src="_images/image67.png" />
<p>Il existe une multitude d’applications prêtent à être utilisée avec Docker, accessible en ligne de commande.
Nous verrons rapidement comment Docker permet de créer notre propre package d’application pour faciliter : l’installation, l’utilisation et le déploiement.</p>
</section>
<section id="quelques-concepts-utiles-pour-les-developpeurs">
<h2>1.3 Quelques concepts utiles pour les Développeurs<a class="headerlink" href="#quelques-concepts-utiles-pour-les-developpeurs" title="Permalink to this headline"></a></h2>
<section id="un-container-linux-cest-quoi">
<h3>1.3.1 Un container Linux, c’est quoi ?<a class="headerlink" href="#un-container-linux-cest-quoi" title="Permalink to this headline"></a></h3>
<p>Un <strong>container</strong> est simplement un processus particulier qui tourne sur le système.
Il est isolé des autres <strong>processus</strong>. Il possède sa propre vision du système sur lequel il tourne, on appelle cela les <strong>Namespaces</strong>.
On peut limiter les ressources utilisées par ce processus en utilisant les Controls Groups (ou Cgroups).
Le même système peut exécuter plusieurs containers en même temps, c’est d’ailleurs ce qui constitue l’avantage de cette technologie.
Le noyau Linux de la machine hôte est <strong>partagé</strong> entre tous ses containeurs.</p>
</section>
<section id="containers-linux-les-namespaces">
<h3>1.3.2 Containers Linux : Les Namespaces<a class="headerlink" href="#containers-linux-les-namespaces" title="Permalink to this headline"></a></h3>
<p>Les <strong>Namespaces</strong> sont des technologies Linux qui servent à isoler un processus.
Cela permet de limiter ce qu’un processus peut voir. Il existe 6 NameSpaces différents :</p>
<ol class="arabic simple">
<li><p><strong>Pid</strong> : Permet de donner à un processus la vision de lui-même et de ses processus enfant.</p></li>
<li><p><strong>Net</strong> : Permet de donner au processus son propre réseau privé.</p></li>
<li><p><strong>Mount</strong> : Permet de donner au processus un système de fichiers privé.</p></li>
<li><p><strong>Uts</strong> : Permet la gestion du nom de l’hôte.</p></li>
<li><p><strong>Ipc</strong> : Isole les communications inter processus.</p></li>
<li><p><strong>User</strong> : permet de faire un mapping entre les utilisateurs de l’hôte et les containeurs.</p></li>
</ol>
</section>
<section id="containers-linux-control-groups-cgroups">
<h3>1.3.2 Containers Linux : Control Groups (cgroups)<a class="headerlink" href="#containers-linux-control-groups-cgroups" title="Permalink to this headline"></a></h3>
<p>Il s’agit d’une autre technologie Linux qui va permettre de limiter les ressources qu’un processus va utiliser.
Par exemple, pour limiter l’utilisation :</p>
<ul class="simple">
<li><p>RAM</p></li>
<li><p>CPU</p></li>
<li><p>I/O (périphériques d’entrées et de sorties)</p></li>
<li><p>Réseau</p></li>
</ul>
</section>
<section id="containers-linux-vm-container">
<h3>1.3.3 Containers Linux : VM/Container<a class="headerlink" href="#containers-linux-vm-container" title="Permalink to this headline"></a></h3>
<img alt="_images/image70.png" src="_images/image70.png" />
<p>On compare souvent les containers à des machines virtuelles, car elles permettent d’exécuter des applications de manière isolée.</p>
<p>Mais là où la virtualisation nécessite un hyperviseur qui s’exécute sur le système d’exploitation de l’hôte et nécessite également que chaque machine virtuelle ait son propre système d’exploitation.</p>
<p>L’approche du container est beaucoup plus légère car chacun partage le Kernel Linux de la machine hôte.</p>
<p>La machine virtuelle consomme plus de disque mémoire et de ram que les containers. Cela implique que beaucoup plus de containers peuvent fonctionner sur une même machine hôte.</p>
</section>
<section id="architecture-micro-services">
<h3>1.3.4 Architecture micro-services<a class="headerlink" href="#architecture-micro-services" title="Permalink to this headline"></a></h3>
<p>Depuis quelques années, les applications sont développées autour d’une architecture appelée « micro-services ». Alors qu’avant une application était souvent un gros bloc unique « monolithique ».</p>
<img alt="_images/image69.png" src="_images/image69.png" />
<p>Aujourd’hui, une application est constituée de plusieurs petits composants qui sont des services qui ont leur propre rôle et fonctionnalité. Et c’est l’interconnexion de l’ensemble de ses services qui permettent de définir l’application globale.</p>
<img alt="_images/image73.png" src="_images/image73.png" />
<p>Dans une application monolithique : Généralement si l’on veut que plusieurs instances de l’application soient déployées il faut créer plusieurs machines virtuelles contenant l’application dans son entièreté.</p>
<img alt="_images/image32.png" src="_images/image32.png" />
<p>Alors que dans le contexte d’une application micro-services chaque service peut être déployé indépendamment des autres services, nous avons plusieurs machines virtuelles sur lesquelles les services des différentes applications sont dispatchées.</p>
<p><strong>Exemple d’architecture micro-services : l’application UBER</strong></p>
<img alt="_images/image72.png" src="_images/image72.png" />
<p>Chaque processus métier est isolé dans un service :</p>
<p>Paiement</p>
<ul class="simple">
<li><p>Notification</p></li>
<li><p>Facturation</p></li>
<li><p>Avantages de l’architecture micro-services ?</p></li>
</ul>
<p>Découpage de l’application en processus (services) indépendants.
Chacun a sa propre responsabilité métier.
Equipe dédiée pour chaque service.
Plus de liberté de choix de langage.
Mise à jour.
Containers très adaptés pour les micro-services.
Inconvénients :</p>
<p>Nécessite des interfaces bien définies.
Focus sur les tests d’intégration.
Déplace la complexité dans l’orchestration de l’application globale. (Docker SWARM ou Kubernetes).</p>
</section>
</section>
</section>
<section id="la-plateforme-docker">
<h1>2.0 La plateforme Docker<a class="headerlink" href="#la-plateforme-docker" title="Permalink to this headline"></a></h1>
<section id="presentation">
<h2>2.1 Présentation<a class="headerlink" href="#presentation" title="Permalink to this headline"></a></h2>
</section>
<section id="installation">
<h2>2.2 Installation<a class="headerlink" href="#installation" title="Permalink to this headline"></a></h2>
</section>
<section id="exercice-installation-avec-multipass">
<h2>2.3 [Exercice] - Installation avec Multipass<a class="headerlink" href="#exercice-installation-avec-multipass" title="Permalink to this headline"></a></h2>
</section>
<section id="exercice-installation-avec-vagrant">
<h2>2.4 [Exercice] - Installation avec Vagrant<a class="headerlink" href="#exercice-installation-avec-vagrant" title="Permalink to this headline"></a></h2>
</section>
<section id="exercice-installation-avec-terraform">
<h2>2.5 [Exercice] - Installation avec Terraform<a class="headerlink" href="#exercice-installation-avec-terraform" title="Permalink to this headline"></a></h2>
</section>
<section id="demo-play-with-docker-com">
<h2>2.6 [Démo] play-with-docker.com<a class="headerlink" href="#demo-play-with-docker-com" title="Permalink to this headline"></a></h2>
</section>
<section id="pour-aller-plus-loin-configuration-du-daemon">
<h2>2.7 [Pour aller plus loin] Configuration du daemon<a class="headerlink" href="#pour-aller-plus-loin-configuration-du-daemon" title="Permalink to this headline"></a></h2>
</section>
<section id="pour-aller-plus-loin-communication-client-serveur">
<h2>2.8 [Pour aller plus loin] Communication client / serveur<a class="headerlink" href="#pour-aller-plus-loin-communication-client-serveur" title="Permalink to this headline"></a></h2>
</section>
<section id="quiz-la-plateforme-docker">
<h2>2.9 Quiz : La plateforme Docker<a class="headerlink" href="#quiz-la-plateforme-docker" title="Permalink to this headline"></a></h2>
</section>
</section>
<section id="les-containers-avec-docker">
<h1>3.0 Les containers avec Docker<a class="headerlink" href="#les-containers-avec-docker" title="Permalink to this headline"></a></h1>
<section id="sommaire">
<h2>3.1 Sommaire<a class="headerlink" href="#sommaire" title="Permalink to this headline"></a></h2>
</section>
<section id="demos-creation-de-containers">
<h2>3.2 [Démos] Création de containers<a class="headerlink" href="#demos-creation-de-containers" title="Permalink to this headline"></a></h2>
</section>
<section id="publication-de-ports">
<h2>3.3 Publication de ports<a class="headerlink" href="#publication-de-ports" title="Permalink to this headline"></a></h2>
</section>
<section id="bind-mount">
<h2>3.4 Bind mount<a class="headerlink" href="#bind-mount" title="Permalink to this headline"></a></h2>
</section>
<section id="limitation-des-ressources">
<h2>3.5 Limitation des ressources<a class="headerlink" href="#limitation-des-ressources" title="Permalink to this headline"></a></h2>
</section>
<section id="les-droits-dans-un-container">
<h2>3.6 Les droits dans un container<a class="headerlink" href="#les-droits-dans-un-container" title="Permalink to this headline"></a></h2>
</section>
<section id="des-options-utiles">
<h2>3.7 Des options utiles<a class="headerlink" href="#des-options-utiles" title="Permalink to this headline"></a></h2>
</section>
<section id="les-commandes-de-base">
<h2>3.8 Les commandes de base<a class="headerlink" href="#les-commandes-de-base" title="Permalink to this headline"></a></h2>
</section>
<section id="demo-les-commandes-de-base">
<h2>3.9 [Démo] Les commandes de base<a class="headerlink" href="#demo-les-commandes-de-base" title="Permalink to this headline"></a></h2>
</section>
<section id="exercice-les-commandes-de-bases">
<h2>3.10 [Exercice] Les commandes de bases<a class="headerlink" href="#exercice-les-commandes-de-bases" title="Permalink to this headline"></a></h2>
</section>
<section id="une-commande-utile">
<h2>3.11 Une commande utile<a class="headerlink" href="#une-commande-utile" title="Permalink to this headline"></a></h2>
</section>
<section id="quiz-3-les-containers-avec-docker">
<h2>Quiz 3 : Les containers avec Docker<a class="headerlink" href="#quiz-3-les-containers-avec-docker" title="Permalink to this headline"></a></h2>
</section>
</section>
<section id="les-images-docker">
<h1>4.0 Les images Docker<a class="headerlink" href="#les-images-docker" title="Permalink to this headline"></a></h1>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Bauer Baptiste.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>